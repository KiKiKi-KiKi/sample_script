<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
</head>
<body>
<script>
var menu1 = ["ジュースA","チョコA","アメA"];
var menu2 = ["ジュースB","チョコB","アメB"];

// 配列の長さを同じにする
var adjustLength = function(arg1, arg2) {
  var l1 = arg1.length,
      l2 = arg2.length,
      gap = Math.abs(l1 - l2),
      adjustArg;
  if(gap) {
    adjustArg = (l1 > l2)? arg2:arg1;
    for(var i=0; i<gap; i+=1) {
      adjustArg[ adjustArg.length ] = "なし！";
    }
  }
};

// 取り出し方のパターンを作成
var getRandomPattern = function(n) {
  var arg = [],
      patterns = [];
  for(var i=0; i<n; i+=1) {
    arg[i] = i;
  }

  var generatePattern = function(tmp, post, n) {
    if(n > 0) {
      var next, rest;
      for(var i=0, l=post.length; i<l; i+=1) {
        rest = post.slice(0);
        next = rest.splice(i, 1);
        generatePattern(tmp.concat(next), rest, n-1);
      }
    } else {
      console.log(tmp);
      patterns[ patterns.length ] = tmp;
    }
  }
  console.log('▼ 取り出し順の全パターン ▼');
  generatePattern([], arg, arg.length);
  return patterns;
};

!function() {
  var i = 0,
      l = 0,
      patterns,
      rand1,
      rand2,
      ptn1,  // menu1 の取り出し順
      ptn2,  // menu2 の取り出し順
      isSame = true;

  adjustLength(menu1, menu2);
  patterns = getRandomPattern( menu1.length );
  rand1 = Math.floor( Math.random() * patterns.length );
  ptn1 = patterns.splice(rand1, 1)[0];
  while(isSame) {
    rand2 = Math.floor( Math.random() * patterns.length );
    ptn2 = patterns.splice(rand2, 1)[0];
    isSame = false;
    for(i=0, l=ptn1.length; i<l; i+=1) {
      // 取り出し順の値が被らないかチェック
      if(ptn1[i] === ptn2[i]) {
        isSame = true;
        break;
      }
    }
  }
  console.log('▼ menu1, menu2 それぞれの取り出し順 ▼');
  console.log(ptn1, ptn2);

  console.log('▼ 決まった取り出し順に基いて順番に取り出す ▼');
  for(i=0, l=ptn1.length; i<l; i+=1) {
    var m1 = menu1[ ptn1[i] ],
        m2 = menu2[ ptn2[i] ];
    console.log(m1 + 'と' + m2);
  }
}();

console.log('------C');

var menuA = ["ジュース","チョコ","アメ"];
var menuB = ["チョコ","ジュース","アメ","バナナ"];

var generatePatterns = function(arg, tmp, post, n) {
  if(n > 0) {
    var next, rest;
    for(var i=0, l=post.length; i<l; i+=1) {
      rest = post.slice(0);
      next = rest.splice(i, 1);
      generatePatterns(arg, tmp.concat(next), rest, n-1);
    }
  } else {
    console.log(tmp);
    arg[ arg.length ] = tmp;
  }
}
!function() {
  var i = 0,
      l = 0,
      allPatternsA = [],
      allPatternsB = [],
      randA,
      randB,
      ptnA,
      ptnB,
      isSame = true;

  adjustLength(menuA, menuB);
  console.log('▼ menuAの取り出し方の全パターン ▼');
  generatePatterns(allPatternsA, [], menuA, menuA.length);
  console.log('▼ menuBの取り出し方の全パターン ▼');
  generatePatterns(allPatternsB, [], menuB, menuB.length);

  randA = Math.floor( Math.random() * allPatternsA.length );
  ptnA = allPatternsA[randA];
  while(isSame) {
    randB = Math.floor( Math.random() * allPatternsB.length );
    ptnB = allPatternsB[randB];
    isSame = false;
    for(i=0, l=ptnA.length; i<l; i+=1) {
      // 取り出し順の値が被らないかチェック
      if(ptnA[i] === ptnB[i]) {
        isSame = true;
        break;
      }
    }
  }
  console.log('▼ menuA, menuB それぞれの取り出し順 ▼');
  console.log(ptnA, ptnB);

  console.log('▼ 決まった取り出し順に基いて順番に取り出す ▼');
  for(i=0, l=ptnA.length; i<l; i+=1) {
    var m1 = ptnA[i],
        m2 = ptnB[i];
    console.log(m1 + 'と' + m2);
  }
}();

console.log('-----A');
(function() {
  var used = [];

  for(var i = 0; i < 3;){
    //menuのrandom
    var rnd1 = Math.floor(Math.random() * menu1.length);
    var rnd2 = Math.floor(Math.random() * menu2.length);

    if (rnd1 == rnd2) {
        continue;
    }

    var key  = ((1 << rnd1) | (1 << rnd2));
    if (used[key] == true) {
        continue;
    }

    console.log(menu1[rnd1] + "と" + menu2[rnd2]);
    used[key] = true;
    i++;
  }
})();
console.log('------B');
(function() {
  var shown = {};
  var i = 0;
  while( i < 3 ){
    //menuのrandom
    var rnd1 = Math.floor(Math.random() * menu1.length);
    var rnd2 = Math.floor(Math.random() * menu2.length);
    var msg = menu1[rnd1] + "と" + menu2[rnd2];
    if( shown[msg] ) continue;
    i++;
    shown[msg] = true;
    console.log(msg);
  }
})();
</script>
</body>
</html>
